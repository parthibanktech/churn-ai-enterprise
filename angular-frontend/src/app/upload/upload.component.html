<div class="auth-wrapper animate-in">
  <div class="auth-card" style="max-width: 500px;">
    <div class="auth-header">
      <div class="auth-icon" style="background: var(--success-glow); color: var(--success);">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <ellipse cx="12" cy="5" rx="9" ry="3"/>
          <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
          <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
        </svg>
      </div>
      <h2 class="auth-title">Data Upload Center</h2>
      <p class="auth-desc">Upload customer data for churn analysis and prediction</p>
    </div>
    
    @if (error) {
      <div class="error-message">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
          <line x1="12" y1="9" x2="12" y2="13"/>
          <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
        {{ error }}
      </div>
    }

    <label class="upload-zone" (click)="fileInput.click()">
      <input 
        type="file" 
        hidden 
        accept=".csv" 
        #fileInput
        (change)="onFileSelected($event)"
      />
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--accent); margin-bottom: 1.5rem;">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="17,8 12,3 7,8"/>
        <line x1="12" y1="3" x2="12" y2="15"/>
      </svg>
      <p style="font-weight: 700; margin-bottom: 0.5rem;">
        @if (selectedFile) {
          {{ selectedFile.name }}
        } @else {
          Click to browse or drag and drop
        }
      </p>
      <p style="font-size: 0.75rem; color: var(--text-muted);">CSV files only â€¢ Max 10MB</p>
    </label>

    <div class="upload-requirements">
      <h4 style="font-size: 0.875rem; font-weight: 700; margin-bottom: 1rem; color: var(--text-main);">
        Required CSV Columns:
      </h4>
      <div class="req-list">
        <div class="req-item">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20,6 9,17 4,12"/>
          </svg>
          customerID
        </div>
        <div class="req-item">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20,6 9,17 4,12"/>
          </svg>
          tenure
        </div>
        <div class="req-item">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20,6 9,17 4,12"/>
          </svg>
          MonthlyCharges
        </div>
        <div class="req-item">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20,6 9,17 4,12"/>
          </svg>
          Contract
        </div>
      </div>
    </div>

    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
      <button 
        class="btn-primary" 
        (click)="onUpload()" 
        [disabled]="!selectedFile || isUploading"
        style="flex: 1;"
      >
        @if (!isUploading) {
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17,8 12,3 7,8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          Upload & Analyze
        } @else {
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="animate-spin" style="margin-right: 0.5rem;">
            <path d="M21 12a9 9 0 11-6.219-8.56"/>
          </svg>
          Processing...
        }
      </button>
      
      <button class="btn-secondary" (click)="goBack()" style="flex: 0.5;">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem; transform: rotate(180deg);">
          <line x1="5" y1="12" x2="19" y2="12"/>
          <polyline points="12,5 19,12 12,19"/>
        </svg>
        Back
      </button>
    </div>
  </div>
</div>
